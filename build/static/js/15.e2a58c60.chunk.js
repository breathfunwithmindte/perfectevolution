(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[15],{566:function(e,t,a){},719:function(e,t,a){"use strict";a.r(t);var r=a(4),s=a.n(r),n=a(11),o=a(25),c=a(2),l=a(0),i=a.n(l),m=a(13),u=a(57),d=a(7),f=a(14),h=a(6),g=a.n(h),_=a(148),p=(a(566),a(113)),E=a(247),v=a(26);var y=i.a.memo((function(e){var t=i.a.useState(!1),a=Object(c.a)(t,2),r=a[0],o=a[1],l=i.a.useContext(m.a).user,u=i.a.useState([]),f=Object(c.a)(u,2),h=(f[0],f[1],"");return h=e.story.auth.username.length>10?e.story.auth.username.slice(0,10):e.story.auth.username,i.a.createElement("div",{className:"story_card"},i.a.createElement("img",{src:"".concat(e.story.auth.coverImage.coverPhoto),alt:"",className:"thumbnail",onClick:Object(n.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o(!0),t.next=3,d.a.emit("stories",{storyID:e.story._id,userID:l._id});case 3:t.sent;case 4:case"end":return t.stop()}}),t)})))}),i.a.createElement("div",{className:"story_data"},i.a.createElement("img",{src:"".concat(e.story.auth.profileImage),alt:"",className:e.story.viewers.find((function(e){return e._id===l._id}))?"profile":"profileNotWatched"}),i.a.createElement("p",null,h)),i.a.createElement(p.a,{open:r,onClose:function(){return o(!1)},maxWidth:!0},i.a.createElement("div",{className:"story_dialog"},i.a.createElement("div",{className:"story_video_player_container"},i.a.createElement("video",{className:"story_video_player",src:"".concat(e.story.story),controls:!0})),i.a.createElement("div",{className:"story_right_side"},i.a.createElement("h3",{className:"who_saw_story_title"},"People who watched the story !!"),i.a.createElement("div",{className:"who_saw_story_container"},e.story.viewers&&e.story.viewers.map((function(t){return i.a.createElement("div",{w:e.story.viewers,key:t._id,style:{display:"flex",flexWrap:"wrap"}},i.a.createElement(E.a,{title:i.a.createElement("div",null,i.a.createElement("h3",null,t.username))},i.a.createElement(v.a,{color:"secondary"},i.a.createElement("img",{style:{width:"1.8rem",height:"1.8rem",borderRadius:"100%"},src:t.profileImage,alt:""}))))})))),i.a.createElement("div",{className:"story_bottom_text"},"He who lives in harmony with himself lives in harmony with the universe."))))})),b=a(150),w=a(494),N=a(83),j=a.n(N);a(116);t.default=function(){var e,t=Object(l.useState)([]),a=Object(c.a)(t,2),r=a[0],h=a[1],p=Object(l.useState)([].slice(0,4)),N=Object(c.a)(p,2),O=N[0],S=N[1],C=Object(l.useContext)(m.a).user,x=Object(l.useState)([]),k=Object(c.a)(x,2),I=k[0],P=k[1],T=Object(l.useState)([]),F=Object(c.a)(T,2),L=F[0],M=F[1],W=Object(l.useState)(!0),A=Object(c.a)(W,2),B=A[0],D=A[1],U=Object(l.useState)(!0),z=Object(c.a)(U,2),J=z[0],G=z[1],H=Object(l.useState)(""),R=Object(c.a)(H,2),q=R[0],K=(R[1],Object(u.f)()),Q=Object(l.useState)(""),V=Object(c.a)(Q,2),X=V[0],Y=V[1],Z=i.a.useState(C.BackgroundColor),$=Object(c.a)(Z,2),ee=$[0],te=$[1],ae=i.a.useState(C.ThemeMode),re=Object(c.a)(ae,2),se=re[0],ne=re[1];return i.a.useEffect((function(){d.a.on("updatedUser_theme",(function(e){var t=e.updatedUser;te(t.BackgroundColor),ne(t.ThemeMode)}))}),[ee]),console.log(I),Object(l.useEffect)((function(){g.a.get("/user").then((function(e){console.log(e),P(e.data.message.users),M(e.data.message.users),D(!1)})).catch((function(e){return console.log(e)}))}),[q]),Object(l.useEffect)((function(){G(!0),g.a.get("/Stories/get_stories").then((function(e){0===e.data.message.stories.length?h(e.data.message.stories):(G(!1),h(e.data.message.stories),S(e.data.message.stories.slice(0,4)))})).catch((function(e){return alert("smth went wrong refresh the page")}))}),[]),Object(l.useEffect)((function(){d.a.on("storiesGET",(function(e){var t=e.stories;h(t)}))}),[O]),!0===B?i.a.createElement(w.a,{style:{width:"100%"}}):i.a.createElement("div",{className:"usercontainer"},void 0===C._id?null:i.a.createElement("div",null,i.a.createElement("div",{className:"Stories_container_te"},!0===J?i.a.createElement("div",null,i.a.createElement(w.a,{style:{width:"100%"}})):i.a.createElement("div",{className:"usersPage_stories"},i.a.createElement("button",{id:"left",className:"stories_button",onClick:function(){var e=r.slice();e.unshift(e.pop()),S(e.slice(0,4)),h(e)}},i.a.createElement("i",{className:"fas fa-arrow-left"})),O.map((function(e){return i.a.createElement(y,{story:e})})),i.a.createElement("button",(e={className:"stories_button",id:"right"},Object(o.a)(e,"className","stories_button"),Object(o.a)(e,"onClick",(function(){var e=r.slice();e.push(e.shift()),S(e.slice(0,4)),h(e)})),e),i.a.createElement("i",{className:"fas fa-arrow-right"})))),i.a.createElement(b.a,null)),void 0===C._id?i.a.createElement("h1",{style:{marginTop:"4vh"}},"All users"):null,i.a.createElement("form",null,i.a.createElement("input",{style:{width:"69vw",background:"#141414",color:"white"},placeholder:"@username or @firstname @lastname @email",name:"filtered_users",value:X,id:"search",className:"search_input",onChange:function(e){I!==[]&&(Y(e.target.value),M(I.filter((function(e){return e.username.toLowerCase().match(X)||e.PerfecTInfo.lastname.toLowerCase().match(X)||e.firstName.toLowerCase().match(X)||e.email.toLowerCase().match(X)}))))},type:"text"})),i.a.createElement("div",{className:"users_container"},L&&L.map((function(e){return i.a.createElement("div",{u:L,key:e._id,className:"usercard_usersPage_map",style:{backgroundColor:"".concat(void 0!==ee?ee:"#020c0e"),color:"".concat("dark"===se?"#f4ff81":"#333")}},i.a.createElement("div",{className:"layer"},i.a.createElement("img",{className:"coverimage",src:e.coverImage.coverPhoto,alt:""}),i.a.createElement(f.b,{to:"/Profile_User/".concat(e._id)},i.a.createElement("img",{style:{borderColor:"".concat(e.profileColor)},className:r.find((function(t){return t.auth._id===e._id}))?"profileImage_withstory_allusers_shit":"profileimage_allusers_shit",src:e.profileImage,alt:""})),i.a.createElement("h3",{style:{marginTop:"-1%",textAlign:"center",borderBottomStyle:"solid",borderWidth:"1px"}},e.username),i.a.createElement("div",{className:"usersPage_personal_info"},i.a.createElement("h3",{style:{textAlign:"center",fontSize:"16px",letterSpacing:"1px",marginTop:"-4px"}},e.PerfecTInfo.firstname,"   ",e.PerfecTInfo.lastname,"-",e.PerfecTInfo.age),i.a.createElement("div",{className:"relationship_status_profile"},e.PerfecTInfo.relationshipStatus),i.a.createElement("div",{style:{marginTop:"4%"}},i.a.createElement(E.a,{title:i.a.createElement("h3",{style:{color:"#f50057"}},"Followers")},i.a.createElement(j.a,{fontSize:"small"})),e.Followers.length)),i.a.createElement("div",{className:"allusers_follow_msg_buttons"},i.a.createElement(_.a,{Followers:e.Followers,profileId:e._id}),i.a.createElement(v.a,{name:"messenger",onClick:Object(n.a)(s.a.mark((function t(){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.post("/Messenger/chatroom_new",{authId:C._id,lover:e._id});case 2:a=t.sent,C._id?400===a.status?alert("smth went wrong refresh the page"):(console.log(a),K.push("/messenger/".concat(a.data.message.responseID))):alert("you need login");case 4:case"end":return t.stop()}}),t)}))),style:{backgroundColor:"#1de9b6"}},"Send Messege"))))}))))}}}]);