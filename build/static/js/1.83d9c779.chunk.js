(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[1],{558:function(e,a,t){"use strict";t.d(a,"a",(function(){return b}));var n=t(4),l=t.n(n),r=t(11),c=t(2),o=t(0),i=t.n(o),s=t(552),m=t.n(s),u=t(26),d=t(13),h=t(7),f=t(589),g=t.n(f),E=t(8),v=t.n(E);function b(e){var a=i.a.useContext(d.a).user,t=i.a.useState(!0),n=Object(c.a)(t,2),o=(n[0],n[1],i.a.useState(!0)),s=Object(c.a)(o,2),f=s[0],E=s[1],b=i.a.useState(!0),p=Object(c.a)(b,2),_=p[0],y=p[1];console.log(e.ChatRoom);var I=i.a.useState(),O=Object(c.a)(I,2),C=O[0],k=O[1],x=i.a.useState(),w=Object(c.a)(x,2),j=w[0],N=w[1],S=i.a.useState(!1),R=Object(c.a)(S,2),z=R[0],M=R[1],T=i.a.useState(!1),A=Object(c.a)(T,2),D=(A[0],A[1]),L=e.ChatRoom.username,U=(a.username,e.ChatRoom._id),P=i.a.useRef(),B=i.a.useRef();return i.a.useEffect((function(){var a=function(){var e=Object(r.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({video:f,audio:_});case 3:a=e.sent,k(a),P.current.srcObject=a,h.a.on("HeyMaster_".concat(U),(function(e){var a=e.signalData;M(!0),N(a)})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return e.ChatRoom&&a(),function(){y(!1),E(!1)}}),[e]),i.a.createElement("div",{style:{padding:"1%",width:"100%",height:"100%",backgroundColor:"#141414"}},"\xa0\xa0",i.a.createElement("h3",{style:{color:"red"}}," ",v.a.emojify("Video Chat is still on development mode, but PerfecTEvolutioN team is working hard to create the best Video chat experiense for everyone, just for free ;) ;) we are sorry for make you w8 :(  ".concat(a.firstName))," "),"\xa0\xa0",i.a.createElement(u.a,{onClick:function(){var e=new m.a({initiator:!0,trickle:!1,stream:C});e.on("signal",(function(e){h.a.emit("HeyDebbie",{userToCall:L,signalData:e,chatroomID:U})})),e.on("stream",(function(e){B.current&&(P.current.srcObject=e)})),h.a.on("call_accepted".concat(U),(function(a){var t=a.signal;D(!0),e.signal(t)}))},color:"secondary",style:{width:"100%",display:"flex",justifyContent:"space-evenly"}},i.a.createElement("img",{src:e.ChatRoom.profileImage,style:{width:"34px",height:"34px",borderRadius:"14px"},alt:""}),i.a.createElement("h3",null,e.ChatRoom.username),i.a.createElement(g.a,null)),"\xa0\xa0 \xa0",i.a.createElement("video",{autoPlay:!0,ref:B}),"\xa0\xa0\xa0\xa0",i.a.createElement("video",{autoPlay:!0,ref:P,muted:!0,style:{borderRadius:"50%",float:"right",width:"15vw",height:"20vh",marginTop:"34vh"}}),"\xa0\xa0\xa0",!0===z?i.a.createElement("div",{style:{position:"absolute",top:"23vh",left:"14vw",width:"34vw",height:"fit-content"}},i.a.createElement("h1",null,L," is calling you"),i.a.createElement(u.a,{style:{width:"23vw",background:"green"},onClick:function(){D(!0);var e=new m.a({initiator:!1,trickle:!1,stream:C});e.on("signal",(function(e){h.a.emit("call_accepted",{signal:e,chatroomID:U})})),e.on("stream",(function(e){B.current.srcObject=e})),e.signal(j)}},"Accept")):null,"\xa0\xa0")}},563:function(e,a,t){},582:function(e,a){},583:function(e,a){},614:function(e,a,t){"use strict";var n=t(2),l=t(7),r=t(8),c=t.n(r),o=t(0),i=t.n(o),s=t(6),m=t.n(s),u=t(20),d=t.n(u),h=t(535),f=t(13),g=(t(563),t(247)),E=t(26),v=t(495),b=t(539),p=t(113),_=t(592),y=t.n(_),I=t(86),O=t.n(I),C=t(561),k=t.n(C),x=t(593),w=t.n(x),j=t(14),N=(t(552),t(560)),S=t.n(N),R=t(558);var z=i.a.memo((function(e){var a=i.a.useState(!1),t=Object(n.a)(a,2),l=t[0],r=t[1];return i.a.createElement("div",null,i.a.createElement(g.a,{title:i.a.createElement("h3",null,"video-chat"),placement:"top"},i.a.createElement(E.a,{onClick:function(){r(!0)}},i.a.createElement(S.a,{style:{color:"#0288d1"}}))),i.a.createElement(p.a,{open:l,fullScreen:!0},i.a.createElement("div",{style:{width:"100%",height:"100vh",backgroundColor:"#141414"}},i.a.createElement(E.a,{style:{position:"absolute",right:"1%",width:"15vw",zIndex:"15"},color:"secondary",onClick:function(){return r(!1)}},"CLOSE"),!0===l?i.a.createElement(R.a,{ChatRoom:e.chatroom,close:l}):null)))})),M=t(591),T=t.n(M);var A=i.a.memo((function(e){var a=i.a.useState(!1),t=Object(n.a)(a,2),l=t[0],r=t[1];return i.a.createElement("div",null,i.a.createElement("div",{className:"global_chat_title_oneoneBtn"},i.a.createElement(g.a,{title:i.a.createElement("h3",null,"Voice-chat"),placement:"top"},i.a.createElement(E.a,{onClick:function(){return r(!0)}},i.a.createElement(T.a,{style:{color:"#0288d1"}})))),i.a.createElement(p.a,{open:l,fullScreen:!0},i.a.createElement("div",{style:{width:"100%",height:"100vh",backgroundColor:"#141414"}},i.a.createElement(E.a,{style:{position:"absolute",right:"1%",width:"15vw",zIndex:"15"},color:"secondary",onClick:function(){return r(!1)}},"CLOSE"),!0===l?i.a.createElement(R.a,{ChatRoom:e.chatroom,close:l}):null)))}));a.a=function(){var e=i.a.useState("balarinadead"),a=Object(n.a)(e,2),t=a[0],r=a[1],s=i.a.useContext(f.a).user,u=i.a.useState([]),_=Object(n.a)(u,2),I=_[0],C=_[1],x=i.a.useState("none"),N=Object(n.a)(x,2),S=N[0],R=(N[1],i.a.useState(!1)),M=Object(n.a)(R,2),T=M[0],D=M[1],L=i.a.useState({}),U=Object(n.a)(L,2),P=U[0],B=U[1],V=i.a.useState([]),H=Object(n.a)(V,2),Y=H[0],J=H[1],F=i.a.useState(""),K=Object(n.a)(F,2),q=K[0],G=K[1],Q=i.a.useState(":D"),W=Object(n.a)(Q,2),X=W[0],Z=(W[1],i.a.useState(!1)),$=Object(n.a)(Z,2),ee=$[0],ae=$[1],te=i.a.useState(-14),ne=Object(n.a)(te,2),le=ne[0],re=ne[1],ce=i.a.useState(""),oe=Object(n.a)(ce,2),ie=oe[0],se=oe[1],me=i.a.useState(s.BackgroundColor),ue=Object(n.a)(me,2),de=ue[0],he=ue[1],fe=i.a.useState(s.ThemeMode),ge=Object(n.a)(fe,2),Ee=ge[0],ve=ge[1];i.a.useEffect((function(){l.a.on("updatedUser_theme",(function(e){var a=e.updatedUser;he(a.BackgroundColor),ve(a.ThemeMode)}))}),[de]);var be=Object(o.useRef)(null);return i.a.useEffect((function(){var e;return null===(e=be.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth"})}),[be.current,Y]),i.a.useEffect((function(){m.a.get("/Messenger/myglobal_chatrooms/".concat(s._id)).then((function(e){C(e.data.message.chatrooms)})).catch((function(e){return console.log(e)}))}),[S]),i.a.useEffect((function(){l.a.on("".concat(P.chatroomId),(function(e){var a=e.newmessages;J(a)}))}),[Y,S]),i.a.useEffect((function(){var e=Y[Y.length-1];console.log(e),void 0!==e&&e.auth._id!==s._id&&ae(!0)}),[Y,S]),i.a.createElement("div",{style:{height:"500px"}},i.a.createElement("div",{className:"global_messenger"},I&&I.map((function(e){return i.a.createElement("div",{chtrms:I,key:e._id,className:"chatrooms_globalmsger"},e.auth._id===s._id?i.a.createElement("div",{className:"online_users"},i.a.createElement(h.a,{anchorOrigin:{vertical:"left",horizontal:"right"},badgeContent:e.messanges.filter((function(e){return!1===e.diabastike&&e.auth._id!==s._id})).length,color:"error"},i.a.createElement(h.a,{color:!0===e.lover.Online?"primary":"secondary",overlap:"circle",badgeContent:" ",variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"left"}},i.a.createElement(g.a,{title:i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("h3",null,e.lover.username),"-",i.a.createElement("h3",null,!0===e.lover.Online?"Online":"Offline")),placement:"left-start"},i.a.createElement(E.a,{color:"secondary",onClick:function(){B({profileImage:e.lover.profileImage,username:e.lover.username,chatroomId:e._id,userId:e.lover._id}),J(e.messanges),"balarinadead"===t?r("chatchat"):"chatchat"===t&&r("balarinadead")}},i.a.createElement("img",{className:"".concat(!0===e.lover.Online?"onlineAvatar":"offlineAvatar"),src:"".concat(e.lover.profileImage),alt:""})))))):i.a.createElement("div",{className:"online_users"},i.a.createElement(h.a,{anchorOrigin:{vertical:"left",horizontal:"right"},badgeContent:e.messanges.filter((function(e){return!1===e.diabastike&&e.auth._id!==s._id})).length,color:"error"},i.a.createElement(h.a,{color:!0===e.auth.Online?"primary":"secondary",overlap:"circle",badgeContent:" ",variant:"dot",anchorOrigin:{vertical:"bottom",horizontal:"left"}},i.a.createElement(g.a,{title:i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("h3",null,e.auth.username),"-",i.a.createElement("h3",null,!0===e.auth.Online?"Online":"Offline")),placement:"left-start"},i.a.createElement(E.a,{onClick:function(){B({profileImage:e.auth.profileImage,username:e.auth.username,chatroomId:e._id,userId:e.auth._id}),J(e.messanges),"balarinadead"===t?r("chatchat"):"chatchat"===t&&r("balarinadead")}},i.a.createElement("img",{className:"".concat(!0===e.auth.Online?"onlineAvatar":"offlineAvatar"),src:"".concat(e.auth.profileImage),alt:""})))))))}))),i.a.createElement("div",{className:"".concat(t)},i.a.createElement("div",{className:"global_chat_title"},i.a.createElement(j.c,{className:"global_chat_title_navlink",to:"/Profile_User/".concat(P.userId)},i.a.createElement("img",{src:"".concat(P.profileImage),style:{zIndex:"15",width:"28px",height:"28px",borderRadius:"100%"}})," ",P.Online," "),i.a.createElement("div",{className:"global_chat_title_username"},i.a.createElement("h3",null,i.a.createElement(j.c,{style:{textDecoration:"none  "},to:"/Profile_User/".concat(P.userId)},P.username))),i.a.createElement("div",{className:"global_chat_title_allbuttons"},i.a.createElement("div",{className:"global_chat_title_oneoneBtn"},i.a.createElement(g.a,{title:i.a.createElement("h3",null,"Open in messenger"),placement:"top"},i.a.createElement(E.a,{style:{marginLeft:"1%"}},i.a.createElement(j.c,{to:"/messenger/".concat(P.chatroomId)},i.a.createElement(k.a,{style:{color:"#0288d1"}}))," "))),i.a.createElement(A,{chatroom:P}),i.a.createElement(z,{chatroom:P}),i.a.createElement("div",{className:"global_chat_title_oneoneBtn"},i.a.createElement(g.a,{title:i.a.createElement("h3",null,"close"),placement:"top"},i.a.createElement(E.a,{style:{borderTopRightRadius:"23px"},onClick:function(){return r("balarinadead")}},i.a.createElement(y.a,{style:{color:"#d50000"}})))))),i.a.createElement("div",{className:"global_chat_body",style:{backgroundColor:"".concat(void 0!==de?de:"#020c0e"),color:"".concat("dark"===Ee?"#f4ff81":"#333")}},Y&&Y.map((function(e){return i.a.createElement("div",{m:Y,key:e._id},e.auth._id===s._id?i.a.createElement("div",{className:"global_chat_myMsg_container"},i.a.createElement("div",{className:"global_chat_myMsg"},""!==e.urlImage?i.a.createElement("img",{src:e.urlImage,alt:"",style:{width:"92%",maxHeight:"369px",borderTopRightRadius:"4px",borderTopLeftRadius:"4px"}}):null,i.a.createElement("p",null,c.a.emojify(e.message)),i.a.createElement("p",{style:{fontSize:"14px",color:"#5d4037"}},d()(e.createdAt).fromNow())),i.a.createElement("img",{className:"global_chat_User_Image_MY_icon",src:"".concat(e.auth.profileImage)})):i.a.createElement("div",{className:"global_chat_myMsg_container"},i.a.createElement("img",{className:"global_chat_User_Image_NotMy_icon",src:"".concat(e.auth.profileImage)}),i.a.createElement("div",{className:"global_chat_NotmyMsg"},e.urlImage?i.a.createElement("img",{src:e.urlImage,alt:"",style:{width:"92%"}}):null,i.a.createElement("p",null,c.a.emojify(e.message)),i.a.createElement("p",{style:{fontSize:"14px",color:"#5d4037"}},d()(e.createdAt).fromNow()))),i.a.createElement("hr",{style:{width:"69%",marginLeft:"14%"}}),i.a.createElement("div",{ref:be}))})),Y.find((function(e){return!1===e.diabastike}))?null:i.a.createElement("div",{style:{display:"flex",marginLeft:"69%"}},i.a.createElement(g.a,{title:"Your messages has been read"},i.a.createElement(w.a,null)),i.a.createElement("h3",{style:{fontSize:"14px",color:"#6d4c41"}},"seen"))),i.a.createElement("div",{className:"global_chat_input"},i.a.createElement(E.a,{onClick:function(){re(-14===le?14:-14)}},i.a.createElement(O.a,null)),""!==ie?i.a.createElement("img",{src:ie,alt:"",className:"global_chat_Img_Input"}):null,i.a.createElement(v.a,{style:{height:"28px",zIndex:"1",backgroundColor:"".concat(void 0!==de?de:"#020c0e"),color:"".concat("dark"===Ee?"#f4ff81":"#333")},className:"global_chat_TextareaAutosize",onChange:function(e){return G(e.target.value)},type:"text",onClick:function(){!0===ee&&l.a.emit("diabastike",{chatroomId:P.chatroomId})},onKeyPress:function(e){void 0===s._id?D(!0):"Enter"===e.key&&(l.a.emit("messenger_place",{newmsg:q,authId:s._id,chatroomId:P.chatroomId,urlImage:ie}),G(""))},value:q}),i.a.createElement(E.a,{onClick:function(){void 0===s._id?D(!0):l.a.emit("messenger_place",{newmsg:X,authId:s._id,chatroomId:P.chatroomId,urlImage:ie})}},c.a.emojify(X)))),i.a.createElement("div",{style:{position:"fixed",zIndex:"".concat(le),bottom:"14%",right:"369px",with:"fit-content",height:"fit-content",backgroundColor:"".concat(void 0!==de?de:"#020c0e"),color:"".concat("dark"===Ee?"#f4ff81":"#333"),padding:"23px",borderStyle:"solid"}},i.a.createElement("h3",null,"Fill your Image Location"),""!==ie?i.a.createElement("img",{src:ie,alt:"",style:{width:"300px",height:"300px"}}):null,i.a.createElement(b.a,{onChange:function(e){return se(e.target.value)}})),i.a.createElement(p.a,{open:T,onClose:function(){return D(!1)}},i.a.createElement("h3",null,"You need login first !!")))}}}]);